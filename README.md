# Lathe-on-PSOC ( Electronic Leadscrew )
Электронная гитара на PSOC CY8CKIT-049-42xx

Идея и алгоритмы:
- "Управление токарным на Atmega" https://www.chipmaker.ru/topic/97701/
- "Еще одна электронная гитара для токарника, на Ардуино" https://www.chipmaker.ru/topic/97701/

Для этого проекта ставились задачи:
- только набор минимальных функций
- простота реализации
- снять ограничения atmeg-и

Использованный алгоритм синхронизации нужен при:
- относительно низкая стабильность вращения двигателя(недорогие станки)
- большое число импульсов от энкодера(чем больше, тем лучше)
- не имеет смысл делать полный ЧПУ (иначе, замена всех винтов, для устранения люфтов)

Основные компоненты:
- шаговый двигатель NEMA 34
- энкодер E6B2-CWZ5B OMRON 2000P/R
- драйвер Leadshine DMA860H Driver DC 24-80V
- CY8CKIT-049-42xx
- LCD 20x4
- PSoC® Creator™ Integrated Design Environment (IDE)

Настройки в main.h:
- #define Screw_mm                2.0 //шаг винта
- #define Motor_Z_Step_Per_Rev    200 // Кол-во шагов/об
- #define QUAD_RES                2000//энкодер дел/об
- #define MicroStep_Z             4   // Микрошаг
- #define ACCEL                   20  // accel* steps

Проблемы:
- из-за люфта показания неточные
- подклинивание ШД при больших оборотах и подачах
- устранение подклинивания акселерацией ограничено длиной разгона


